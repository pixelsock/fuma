(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6064],{43431:(e,s,r)=>{"use strict";r.d(s,{SearchNavigationWrapper:()=>v});var n=r(95155),t=r(12115),i=r(97004),o=r(78538),c=r(39249),a=r(35695),l=r(42355),d=r(13052),u=r(54416),f=r(47863),h=r(66474),m=r(57434);function b(){var e,s=(0,o._)((0,t.useState)(0),2),r=s[0],b=s[1],v=(0,o._)((0,t.useState)(0),2),g=v[0],x=v[1],p=(0,o._)((0,t.useState)([]),2),N=p[0],j=p[1],w=(0,o._)((0,t.useState)(!1),2),y=w[0],S=w[1],P=(0,o._)((0,t.useState)(!1),2),k=P[0],C=P[1],E=(0,a.useSearchParams)(),_=(0,a.useRouter)(),A=(0,a.usePathname)(),L=(null==E?void 0:E.get("search"))||"",I=(null==A?void 0:A.split("/").pop())||"";(0,t.useEffect)(function(){if(console.log("SearchNavigationEnhanced useEffect - searchTerm:",L),!L){x(0),b(0),j([]);return}var e=function(){var e=document.querySelectorAll(".search-highlight"),s=e.length;console.log("SearchNavigationEnhanced - Found highlights:",s),s!==g&&(x(s),s>0&&0===r&&(e[0].scrollIntoView({behavior:"smooth",block:"start"}),e[0].classList.add("ring-2","ring-fd-primary")))},s=setTimeout(e,200),n=setInterval(e,500);return R(),function(){clearTimeout(s),clearInterval(n)}},[L,A,g,r]);var R=(e=(0,i._)(function(){var e;return(0,c.YH)(this,function(s){switch(s.label){case 0:if(!L)return[2];C(!0),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,fetch("".concat("/app","/api/search-articles?q=").concat(encodeURIComponent(L),"&current=").concat(encodeURIComponent(I)))];case 2:if(!(e=s.sent()).ok)return[3,4];return[4,e.json()];case 3:j(s.sent().articles||[]),s.label=4;case 4:return[3,6];case 5:return console.error("Error fetching articles:",s.sent()),[3,6];case 6:return C(!1),[2]}})}),function(){return e.apply(this,arguments)}),q=function(e){var s=document.querySelectorAll(".search-highlight");s[e]&&(s.forEach(function(e){return e.classList.remove("ring-2","ring-fd-primary")}),s[e].scrollIntoView({behavior:"smooth",block:"start"}),s[e].classList.add("ring-2","ring-fd-primary"),b(e))},U=function(e){var s="/articles/".concat(e,"?search=").concat(encodeURIComponent(L||""));_.push(s)};return L?(0,n.jsxs)("div",{className:"fixed bottom-4 right-4 z-40 bg-fd-card border border-fd-border rounded-lg shadow-lg min-w-[320px] max-w-[400px]",children:[(0,n.jsx)("div",{className:"p-4 border-b border-fd-border",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"text-sm text-fd-muted-foreground",children:["Searching for: ",(0,n.jsxs)("strong",{className:"text-fd-foreground",children:['"',L,'"']})]}),g>0&&(0,n.jsxs)("div",{className:"text-xs text-fd-muted-foreground mt-1",children:[(0,n.jsx)("span",{className:"text-fd-accent-foreground font-medium",children:r+1})," of ",(0,n.jsx)("span",{className:"text-fd-accent-foreground font-medium",children:g})," in this article"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{onClick:function(){0!==g&&q(0===r?g-1:r-1)},disabled:0===g,className:"p-1.5 rounded hover:bg-fd-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring focus-visible:ring-offset-2","aria-label":"Previous result",children:(0,n.jsx)(l.A,{className:"h-4 w-4"})}),(0,n.jsx)("button",{onClick:function(){0!==g&&q(r===g-1?0:r+1)},disabled:0===g,className:"p-1.5 rounded hover:bg-fd-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring focus-visible:ring-offset-2","aria-label":"Next result",children:(0,n.jsx)(d.A,{className:"h-4 w-4"})}),(0,n.jsx)("button",{onClick:function(){document.querySelectorAll(".search-highlight").forEach(function(e){return e.classList.remove("ring-2","ring-fd-primary")});var e=new URLSearchParams(E||void 0);e.delete("search");var s=e.toString()?"".concat(A,"?").concat(e.toString()):A;_.replace(s||"/")},className:"p-1.5 rounded hover:bg-fd-accent transition-colors ml-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring focus-visible:ring-offset-2","aria-label":"Close search",children:(0,n.jsx)(u.A,{className:"h-4 w-4"})})]})]})}),(0,n.jsxs)("div",{className:"border-t border-fd-border",children:[(0,n.jsxs)("button",{onClick:function(){return S(!y)},className:"w-full px-4 py-3 flex items-center justify-between hover:bg-fd-accent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring focus-visible:ring-inset",children:[(0,n.jsxs)("span",{className:"text-sm font-medium text-fd-foreground",children:["Other articles (",k?"...":(0,n.jsx)("span",{className:"text-fd-accent-foreground",children:N.length}),")"]}),y?(0,n.jsx)(f.A,{className:"h-4 w-4 text-fd-muted-foreground"}):(0,n.jsx)(h.A,{className:"h-4 w-4 text-fd-muted-foreground"})]}),y&&(0,n.jsx)("div",{className:"max-h-64 overflow-y-auto",children:k?(0,n.jsx)("div",{className:"px-4 py-3 text-sm text-fd-muted-foreground",children:"Loading..."}):N.length>0?(0,n.jsx)("div",{className:"py-2",children:N.map(function(e){return(0,n.jsx)("button",{onClick:function(){return U(e.slug)},className:"w-full px-4 py-2 text-left hover:bg-fd-accent transition-colors group focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fd-ring focus-visible:ring-inset",children:(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)(m.A,{className:"h-4 w-4 text-fd-muted-foreground mt-0.5 flex-shrink-0 group-hover:text-fd-primary"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-fd-foreground group-hover:text-fd-primary truncate",children:e.name}),(0,n.jsxs)("div",{className:"text-xs text-fd-accent-foreground",children:[e.count," occurrence",1!==e.count?"s":""]}),e.snippet&&(0,n.jsx)("div",{className:"text-xs text-fd-muted-foreground mt-1 line-clamp-2",children:e.snippet})]})]})},e.id)})}):(0,n.jsxs)("div",{className:"px-4 py-3 text-sm text-fd-muted-foreground",children:['No other articles found with "',L,'"']})})]})]}):null}function v(){return(0,n.jsx)(t.Suspense,{fallback:null,children:(0,n.jsx)(b,{})})}},72418:(e,s,r)=>{"use strict";r.d(s,{SidebarVisibilityController:()=>i});var n=r(95155),t=r(12115);function i(e){var s=e.children,r=e.showSidebar;return e.showSidebarIcon,(0,t.useEffect)(function(){return r?document.body.classList.remove("sidebar-hidden"):document.body.classList.add("sidebar-hidden"),function(){r||document.body.classList.remove("sidebar-hidden")}},[r]),(0,n.jsx)(n.Fragment,{children:s})}},96064:(e,s,r)=>{Promise.resolve().then(r.bind(r,43431)),Promise.resolve().then(r.bind(r,72418)),Promise.resolve().then(r.bind(r,49949)),Promise.resolve().then(r.bind(r,91053)),Promise.resolve().then(r.bind(r,30799)),Promise.resolve().then(r.bind(r,55403)),Promise.resolve().then(r.bind(r,10198)),Promise.resolve().then(r.bind(r,11624)),Promise.resolve().then(r.bind(r,19624)),Promise.resolve().then(r.bind(r,74113)),Promise.resolve().then(r.bind(r,71339)),Promise.resolve().then(r.bind(r,28693)),Promise.resolve().then(r.bind(r,14657)),Promise.resolve().then(r.bind(r,90531))}}]);