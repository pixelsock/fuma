(()=>{var e={};e.id=202,e.ids=[202],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70744:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>S,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{GET:()=>d});var i=r(96559),n=r(48088),l=r(37719),a=r(55399);let o=null,u=0;async function c(){let e=Date.now();if(o&&e-u<3e5)return o;let t=await (0,a.GE)(),r=[];return t.forEach(e=>{let t=e.htmlContent||"";t.split(/\s+/).slice(0,500);let s=[];function i(e){return e.toLowerCase().replace(/[^a-z0-9\s\-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").substring(0,50)}let n=Array.from(t.matchAll(/(?:^|\.\s+)(\d+\.\s*\d+)\s+([A-Z][A-Z\s&,().-]{4,50}?)(?=\s+[A-Z]|\s+\d|\s*\.|\s*$)/gim)).map(e=>{let t=e[1].trim(),r=e[2].trim();r=r.replace(/\s+(and|of|the|in|on|at|to|for|with|by|from)$/i,"");let s=`${t} ${r}`;return{id:i(s),title:s,number:t,index:e.index||0}});0===n.length?[{number:"1.1",title:"1.1 TITLE",id:i("1.1 TITLE")},{number:"1.2",title:"1.2 AUTHORITY",id:i("1.2 AUTHORITY")},{number:"1.3",title:"1.3 PURPOSE AND INTENT",id:i("1.3 PURPOSE AND INTENT")},{number:"4.1",title:"4.1 PURPOSE",id:i("4.1 PURPOSE")},{number:"4.2",title:"4.2 USES",id:i("4.2 USES")},{number:"4.3",title:"4.3 DIMENSIONAL AND DESIGN STANDARDS",id:i("4.3 DIMENSIONAL AND DESIGN STANDARDS")}].forEach((e,r)=>{RegExp(e.number.replace(".","\\."),"gi").test(t)&&s.push({...e,index:1e3*r})}):s.push(...n),console.log(`Found ${s.length} sections in article: ${e.title}`),s.forEach((i,n)=>{let l=s[n+1],a=i.index,o=l?l.index:t.length,u=t.substring(a,o).replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();r.push({title:i.title,description:`${e.title} - ${i.title}`,content:u,url:`/articles/${e.category?.slug||"uncategorized"}/${e.slug}#${i.id}`,id:`${e.slug}-${i.id}-${n}`,tag:`${e.category?.slug||"uncategorized"}/${e.slug}`,articleTitle:e.title,articleSlug:e.slug,sectionDepth:(i.number?.match(/\./g)||[]).length+1})});let l=e.htmlContent.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim();r.push({title:e.title,description:e.description,content:l,url:`/articles/${e.category?.slug||"uncategorized"}/${e.slug}`,id:e.slug,tag:`${e.category?.slug||"uncategorized"}/${e.slug}`,articleTitle:e.title,articleSlug:e.slug,isMainArticle:!0})}),o=r,u=e,o}async function d(e){try{let t=new URL(e.url),r=t.searchParams.get("query"),s=t.searchParams.get("tag"),i=await c();if(console.log("Search indexes length:",i.length),console.log("Sample index titles:",i.slice(0,5).map(e=>e.title)),!r)return Response.json(i.slice(0,10));let n=i.filter(e=>{let t=`${e.title} ${e.content} ${e.description||""}`.toLowerCase().includes(r.toLowerCase()),i=!s||e.tag===s;return t&&i}).sort((e,t)=>{let s=e.title.toLowerCase(),i=t.title.toLowerCase(),n=r.toLowerCase(),l=s.includes(n),a=i.includes(n);return l&&!a?-1:!l&&a?1:0});return Response.json(n)}catch(e){return console.error("Search API error:",e),Response.json([],{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/search/route",pathname:"/api/search",filename:"route",bundlePath:"app/api/search/route"},resolvedPagePath:"/Users/nick/Sites/charlotteUDO/directus/frontend-fumadocs/fuma/app/api/search/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:h,serverHooks:m}=p;function S(){return(0,l.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:h})}},78335:()=>{},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[719,929,399],()=>r(70744));module.exports=s})();